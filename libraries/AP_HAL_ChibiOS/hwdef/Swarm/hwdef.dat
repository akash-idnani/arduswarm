MCU STM32F4xx STM32F405xx

APJ_BOARD_ID 9999

OSCILLATOR_HZ 8000000

STM32_ST_USE_TIMER 5

FLASH_SIZE_KB 1024

# Reserved for bootloader
FLASH_RESERVE_START_KB 64

USB_STRING_MANUFACTURER "ArduPilot"
USB_STRING_PRODUCT "%BOARD%"

SERIAL_ORDER OTG1 EMPTY USART1 EMPTY EMPTY EMPTY

define HAL_NO_LOGGING

define HAL_STORAGE_SIZE 16384
define STORAGE_FLASH_PAGE 1

define HAL_BARO_ALLOW_INIT_NO_BARO

# SBUS UART (TX not broken out)
PB6 USART1_TX USART1
PB7 USART1_RX USART1

# DWM1001 UART
PA2 USART2_TX USART2
PA3 USART2_RX USART2

PA4 IMU_CS CS
PA5 SPI1_SCK SPI1
PA6 SPI1_MISO SPI1
PA7 SPI1_MOSI SPI1

PA11 OTG_FS_DM OTG1
PA12 OTG_FS_DP OTG1

PA13 JTMS-SWDIO SWD
PA14 JTCK-SWCLK SWD


SPIDEV icm20948       SPI1 DEVID1  IMU_CS       MODE3  4*MHZ  8*MHZ
IMU Invensensev2 SPI:icm20948 ROTATION_YAW_180

PB0 BATT_VOLTAGE_SENS ADC1 SCALE(1)
PB1 BATT_CURRENT_SENS ADC1 SCALE(1)

define HAL_BATT_VOLT_PIN 8
define HAL_BATT_CURR_PIN 9
define HAL_BATT_VOLT_SCALE 1.33
define HAL_BATT_CURR_SCALE 1.67

PC6 TIM3_CH1 TIM3 PWM(1) GPIO(50)
PC9 TIM3_CH4 TIM3 PWM(2) GPIO(51)
PC7 TIM3_CH2 TIM3 PWM(3) GPIO(52)
PC8 TIM3_CH3 TIM3 PWM(4) GPIO(53)

PA8 LED_BLUE OUTPUT LOW GPIO(0)
define HAL_GPIO_A_LED_PIN 0

define BOARD_PWM_COUNT_DEFAULT 4

